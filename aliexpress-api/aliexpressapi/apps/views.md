apiexpress clone API Documentation To Handle 1 billion/trilion users

üé® Accounts / Identity API ‚Äì Enhanced ViewSets Overview
üõ†Ô∏è API Highlights
| **ViewSet**                 | **List Endpoint**             | **Retrieve Endpoint**            | **Special Features**                                                  | **Caching**                      | **Filtering/Sorting**     | **Bulk Support** | **Notes**                                                                |
| --------------------------- | ----------------------------- | -------------------------------- | --------------------------------------------------------------------- | -------------------------------- | ------------------------- | ---------------- | ------------------------------------------------------------------------ |
| `UserViewSet`               | `GET /api/users/`             | `GET /api/users/{id}/`           | Role-based (buyer/seller/admin), KYC status tracking, last login info | ‚ö†Ô∏è Partial (profile cache)       | ‚úÖ Yes (role, KYC, active) | üöß Planned       | Admin-only for list; normal users can only view/update their own profile |
| `AuthViewSet`               | `POST /api/auth/login/`       | ‚ùå                                | JWT login, refresh tokens, device binding                             | ‚úÖ Yes (short-lived JWT in Redis) | ‚ùå                         | ‚ùå                | SSR-ready (HttpOnly cookie refresh) for Nuxt3                            |
| `LogoutViewSet`             | `POST /api/auth/logout/`      | ‚ùå                                | Token/session invalidation, multi-device support                      | ‚úÖ Yes (Redis token blacklist)    | ‚ùå                         | ‚ùå                | Revokes all tokens for given device                                      |
| `PasswordResetViewSet`      | `POST /api/password/request/` | `POST /api/password/reset/`      | Issues one-time reset tokens, tracks expiry & usage                   | ‚ùå No                             | ‚ùå                         | ‚ùå                | Reset flow triggers async email/SMS event                                |
| `DeviceViewSet`             | `GET /api/devices/`           | `GET /api/devices/{id}/`         | Multi-device login mgmt, push token storage                           | ‚úÖ Yes (last-active cache)        | ‚úÖ Yes (device type, user) | ‚úÖ Yes            | Lets users revoke lost/stolen devices                                    |
| `KYCViewSet`                | `POST /api/kyc/submit/`       | `GET /api/kyc/status/{user_id}/` | Document upload, approval workflow, async processing                  | ‚ùå No                             | ‚úÖ Yes (status, date)      | ‚ùå                | On approval ‚Üí user role auto-upgraded to `seller`                        |
| `SessionViewSet` (optional) | `GET /api/sessions/`          | `GET /api/sessions/{id}/`        | Active session listing for user; force logout support                 | ‚úÖ Yes (Redis-backed)             | ‚úÖ Yes (ip, device, user)  | ‚ùå                | Useful for security dashboards                                     
      |
üé® Permissions & Roles API ‚Äì Enhanced ViewSets Overview
üõ†Ô∏è API Highlights
| **ViewSet**                      | **List Endpoint**                | **Retrieve Endpoint**                 | **Special Features**                                                                                    | **Caching**                       | **Filtering/Sorting**               | **Bulk Support** | **Notes**                                                    |
| -------------------------------- | -------------------------------- | ------------------------------------- | ------------------------------------------------------------------------------------------------------- | --------------------------------- | ----------------------------------- | ---------------- | ------------------------------------------------------------ |
| `RoleViewSet`                    | `GET /api/roles/`                | `GET /api/roles/{id}/`                | Manages roles (`admin`, `seller`, `buyer`); role assignment to users                                    | ‚ùå No                              | ‚úÖ Yes (role name)                   | ‚úÖ Yes            | Admin-only; assigns roles to users                           |
| `PermissionViewSet`              | `GET /api/permissions/`          | `GET /api/permissions/{id}/`          | Manages system-wide permissions (CRUD per resource)                                                     | ‚ùå No                              | ‚úÖ Yes (resource, action)            | ‚úÖ Yes            | Super-admin only                                             |
| `UserRoleViewSet`                | `GET /api/user-roles/`           | `GET /api/user-roles/{id}/`           | Mapping of users ‚Üî roles; supports multiple roles per user                                              | ‚úÖ Yes (per-user cache)            | ‚úÖ Yes (user, role)                  | ‚úÖ Yes            | Useful for audit dashboards                                  |
| `OrderPermissionViewSet`         | `GET /api/order-permissions/`    | `GET /api/order-permissions/{id}/`    | Object-level permissions for Orders (buyer = own orders, seller = orders with their items, admin = all) | ‚úÖ Yes (query result caching)      | ‚úÖ Yes (order\_id, user\_id, role)   | ‚ùå No             | Enforced dynamically at request level                        |
| `ReturnPermissionViewSet`        | `GET /api/return-permissions/`   | `GET /api/return-permissions/{id}/`   | Controls who can view/approve refunds (buyer can request, seller can respond, admin can override)       | ‚ö†Ô∏è Partial (status checks cached) | ‚úÖ Yes (return\_id, status, role)    | ‚ùå No             | Integrated into return/refund workflow                       |
| `ShipmentPermissionViewSet`      | `GET /api/shipment-permissions/` | `GET /api/shipment-permissions/{id}/` | Controls shipment visibility (buyer sees own shipments, seller sees shipments they fulfill)             | ‚úÖ Yes (tracking cache)            | ‚úÖ Yes (shipment\_id, carrier, role) | ‚ùå No             | Helps ensure sellers don‚Äôt see buyer info from other sellers |
| `AdminOverridePermissionViewSet` | `GET /api/admin-overrides/`      | `GET /api/admin-overrides/{id}/`      | Lets admins temporarily override role checks for critical flows                                         | ‚ùå No                              | ‚úÖ Yes (resource, user\_id)          | ‚ùå No             | Logs every override via Kafka ‚Üí AuditLog                     |



# Products API ‚Äì ViewSets Documentation

This document describes all the API **ViewSets** available in `products/api/viewsets.py`.  


## üé® Products Table API ‚Äì Enhanced ViewSets Overview

| **ViewSet**                | **List Endpoint**                | **Retrieve Endpoint**              | **Special Features**         | **Caching**         | **Filtering/Sorting** | **Bulk Support** | **Notes**                       |
|----------------------------|----------------------------------|------------------------------------|------------------------------|---------------------|-----------------------|------------------|----------------------------------|
| `ProductsViewSet`          | `GET /api/products/`             | `GET /api/products/{id}/`          | Cache + Cursor Pagination    | ‚úÖ Yes (list/single) | ‚úÖ Yes                | üöß Planned       | Most traffic, optimize prefetch  |
| `CategoryViewSet`          | `GET /api/categories/`           | `GET /api/categories/{id}/`        | Hierarchical categories      | ‚ùå No                | ‚úÖ Yes                | ‚úÖ Yes           | Good for faceted search          |
| `BrandViewSet`             | `GET /api/brands/`               | `GET /api/brands/{id}/`            | Simple retrieval             | ‚ùå No                | ‚úÖ Yes                | ‚úÖ Yes           | Frequently cached                |
| `ProductImageViewSet`      | `GET /api/product-images/`       | `GET /api/product-images/{id}/`    | CDN recommended              | ‚ùå No                | ‚ö†Ô∏è Limited            | ‚úÖ Yes           | Consider CDN for images          |
| `ProductVariantViewSet`    | `GET /api/variants/`             | `GET /api/variants/{id}/`          | Variant options              | ‚ùå No                | ‚úÖ Yes                | ‚úÖ Yes           | Heavy prefetching                |
| `ProductAttributeViewSet`  | `GET /api/attributes/`           | `GET /api/attributes/{id}/`        | Lightweight attributes       | ‚ùå No                | ‚úÖ Yes                | ‚úÖ Yes           | Lightweight                      |
| `InventoryViewSet`         | `GET /api/inventory/`            | `GET /api/inventory/{id}/`         | Stock tracking, real-time    | ‚ùå No                | ‚úÖ Yes                | ‚úÖ Yes           | Should be real-time              |

---

## üé® Cart & Wishlist Table API ‚Äì Enhanced ViewSets Overview
### üõ†Ô∏è API Highlights

| **ViewSet**           | **List Endpoint**          | **Retrieve Endpoint**           | **Special Features**            | **Caching**        | **Filtering/Sorting** | **Bulk Support** | **Notes**                                     |
| --------------------- | -------------------------- | ------------------------------- | ------------------------------- | ------------------ | --------------------- | ---------------- | --------------------------------------------- |
| `CartViewSet`         | `GET /api/cart/`           | `GET /api/cart/{id}/`           | Auto-create, per-user isolation | ‚úÖ Yes (per-user)   | ‚ö†Ô∏è Limited            | üöß Planned       | One active cart per user; merge on login      |
| `CartItemViewSet`     | `GET /api/cart-items/`     | `GET /api/cart-items/{id}/`     | Add/Update/Delete products      | ‚úÖ Yes (items list) | ‚úÖ Yes                 | ‚úÖ Yes            | Idempotent add-to-cart, optimistic locking    |
| `WishlistViewSet`     | `GET /api/wishlists/`      | `GET /api/wishlists/{id}/`      | Simple, user-specific           | ‚ùå No               | ‚úÖ Yes                 | üöß Planned       | Typically 1 wishlist per user                 |
| `WishlistItemViewSet` | `GET /api/wishlist-items/` | `GET /api/wishlist-items/{id}/` | Add/Remove wishlist items       | ‚ùå No               | ‚úÖ Yes                 | ‚úÖ Yes            | Consider async events ‚Üí recommendation engine |


## üé® SearchViewSet Table API ‚Äì Enhanced ViewSets Overview
### üõ†Ô∏è API Highlights

| **ViewSet**                 | **List Endpoint**                     | **Retrieve Endpoint**                    | **Special Features**                 | **Caching**         | **Filtering/Sorting** | **Bulk Support** | **Notes**                                    |
| --------------------------- | ------------------------------------- | ---------------------------------------- | ------------------------------------ | ------------------- | --------------------- | ---------------- | -------------------------------------------- |
| `SearchViewSet`             | `GET /api/search/`                    | ‚Äì                                        | Full-text, Faceted, Sorting          | ‚úÖ Yes (query cache) | ‚úÖ Yes                 | üöß Planned       | Backed by ElasticSearch                      |
| `RecommendationViewSet`     | `GET /api/recommendations/user/{id}/` | `GET /api/recommendations/product/{id}/` | Personalized, Trending, Also Bought  | ‚úÖ Yes (per-user)    | ‚ö†Ô∏è Limited            | ‚ùå No             | Realtime from cache or ML service            |
| `RecommendationRuleViewSet` | `GET /api/rules/`                     | `GET /api/rules/{id}/`                   | Manage rule-based recommendations    | ‚ùå No                | ‚úÖ Yes                 | ‚úÖ Yes            | Admin-only                                   |
| `RecommendationLogViewSet`  | `GET /api/logs/`                      | `GET /api/logs/{id}/`                    | User-product recommendation tracking | ‚ùå No                | ‚úÖ Yes                 | ‚úÖ Yes            | Heavy writes ‚Üí use Kafka ‚Üí async persistence |


## üé® Order Table API ‚Äì Enhanced ViewSets Overview
### üõ†Ô∏è API Highlights

| **ViewSet**        | **List Endpoint**       | **Retrieve Endpoint**        | **Special Features**                                     | **Caching**                  | **Filtering/Sorting**        | **Bulk Support** | **Notes**                                                                 |
| ------------------ | ----------------------- | ---------------------------- | -------------------------------------------------------- | ---------------------------- | ---------------------------- | ---------------- | ------------------------------------------------------------------------- |
| `OrderViewSet`     | `GET /api/orders/`      | `GET /api/orders/{id}/`      | Lifecycle mgmt (pending ‚Üí delivered), multi-seller split | ‚úÖ Yes (recent orders cache)  | ‚úÖ Yes (status, date, user)   | üöß Planned       | Event-driven (`order.created`, `order.paid`) integrated with Kafka/Rabbit |
| `OrderItemViewSet` | `GET /api/order-items/` | `GET /api/order-items/{id}/` | Per-seller item breakdown, SKU & pricing details         | ‚ö†Ô∏è Partial (per-order cache) | ‚úÖ Yes (seller, product, SKU) | ‚úÖ Yes            | Supports seller dashboards for granular item visibility                   |
| `ShipmentViewSet`  | `GET /api/shipments/`   | `GET /api/shipments/{id}/`   | Tracks carrier, tracking no., delivery status            | ‚úÖ Yes (tracking info 15 min) | ‚úÖ Yes (carrier, status)      | ‚ùå No             | Integrated w/ external carriers (FedEx, DHL, etc.)                        |
| `ReturnViewSet`    | `GET /api/returns/`     | `GET /api/returns/{id}/`     | Handles returns/refunds, return reasons                  | ‚ùå No                         | ‚úÖ Yes (status, date)         | ‚úÖ Yes            | Event `order.returned` ‚Üí triggers refund workflows                        |






üìñ Full Backend API Overview (Accounts + Orders + Permissions)
üõ†Ô∏è API Mega-Table
| **Module**      | **ViewSet / Service**       | **List Endpoint**                | **Retrieve Endpoint**                 | **Special Features**                                                      | **Caching**                    | **Filtering/Sorting**         | **Bulk Support** | **Notes**                                       |
| --------------- | --------------------------- | -------------------------------- | ------------------------------------- | ------------------------------------------------------------------------- | ------------------------------ | ----------------------------- | ---------------- | ----------------------------------------------- |
| **Accounts**    | `UserViewSet`               | `GET /api/users/`                | `GET /api/users/{id}/`                | Core user management (admin only)                                         | ‚ùå No                           | ‚úÖ Yes (email, role, active)   | üöß Planned       | Passwords handled via auth service              |
|                 | `AuthViewSet`               | `POST /api/login/`               | ‚ùå                                     | JWT/OAuth2 login, refresh token                                           | ‚ö° Token-level cache in Redis   | ‚ùå No                          | ‚ùå No             | Social logins optional                          |
|                 | `RegisterViewSet`           | `POST /api/register/`            | ‚ùå                                     | User signup (buyer/seller)                                                | ‚ùå No                           | ‚ùå No                          | ‚ùå No             | Triggers welcome email event                    |
|                 | `ProfileViewSet`            | `GET /api/profile/`              | `PATCH /api/profile/{id}/`            | Profile read/update; buyer/seller KYC status                              | ‚úÖ Yes (per-user profile cache) | ‚ùå No                          | ‚ùå No             | Object-level perms enforced                     |
|                 | `KYCViewSet`                | `POST /api/kyc/submit/`          | `GET /api/kyc/status/{user_id}/`      | Seller verification docs upload + approval flow                           | ‚ö†Ô∏è Partial (status cached)     | ‚úÖ Yes (status, date)          | ‚ùå No             | Event-driven updates via Kafka                  |
|                 | `PasswordResetViewSet`      | `POST /api/password/reset/`      | `GET /api/password/reset/{token}/`    | Password reset with expiring token                                        | ‚ùå No                           | ‚ùå No                          | ‚ùå No             | Token one-time use                              |
| **Orders**      | `OrderViewSet`              | `GET /api/orders/`               | `GET /api/orders/{id}/`               | Lifecycle (pending ‚Üí delivered), multi-seller split                       | ‚úÖ Yes (recent orders cache)    | ‚úÖ Yes (status, date, user)    | üöß Planned       | Emits events `order.created`, `order.paid`      |
|                 | `OrderItemViewSet`          | `GET /api/order-items/`          | `GET /api/order-items/{id}/`          | Seller-level breakdown of SKUs, pricing                                   | ‚ö†Ô∏è Partial (per-order cache)   | ‚úÖ Yes (seller, SKU, product)  | ‚úÖ Yes            | Supports seller dashboards                      |
|                 | `ShipmentViewSet`           | `GET /api/shipments/`            | `GET /api/shipments/{id}/`            | Tracks carrier, tracking no., delivery status                             | ‚úÖ Yes (tracking cache, 15 min) | ‚úÖ Yes (carrier, status)       | ‚ùå No             | Linked with external carriers (DHL/FedEx APIs)  |
|                 | `ReturnViewSet`             | `GET /api/returns/`              | `GET /api/returns/{id}/`              | Handles return/refund lifecycle                                           | ‚ùå No                           | ‚úÖ Yes (status, date, reason)  | ‚úÖ Yes            | Event `order.returned` triggers refund pipeline |
| **Permissions** | `RoleViewSet`               | `GET /api/roles/`                | `GET /api/roles/{id}/`                | Role CRUD (`admin`, `seller`, `buyer`)                                    | ‚ùå No                           | ‚úÖ Yes (role)                  | ‚úÖ Yes            | Admin-only                                      |
|                 | `PermissionViewSet`         | `GET /api/permissions/`          | `GET /api/permissions/{id}/`          | CRUD on resource/action permissions                                       | ‚ùå No                           | ‚úÖ Yes (resource, action)      | ‚úÖ Yes            | Super-admin only                                |
|                 | `UserRoleViewSet`           | `GET /api/user-roles/`           | `GET /api/user-roles/{id}/`           | Maps users ‚Üî roles (multiple possible)                                    | ‚úÖ Yes (per-user cache)         | ‚úÖ Yes (user, role)            | ‚úÖ Yes            | Core for audit dashboards                       |
|                 | `OrderPermissionViewSet`    | `GET /api/order-permissions/`    | `GET /api/order-permissions/{id}/`    | Object-level perms: buyer=own orders, seller=their orders, admin=all      | ‚úÖ Yes (query cache)            | ‚úÖ Yes (order\_id, user, role) | ‚ùå No             | Enforced in DRF `has_object_permission`         |
|                 | `ReturnPermissionViewSet`   | `GET /api/return-permissions/`   | `GET /api/return-permissions/{id}/`   | Buyer requests, seller approves, admin override                           | ‚ö†Ô∏è Partial (status cached)     | ‚úÖ Yes (status, role)          | ‚ùå No             | Hooks into refund workflow                      |
|                 | `ShipmentPermissionViewSet` | `GET /api/shipment-permissions/` | `GET /api/shipment-permissions/{id}/` | Buyer sees own shipments, seller sees fulfilled shipments, admin sees all | ‚úÖ Yes (tracking cache)         | ‚úÖ Yes (shipment\_id, carrier) | ‚ùå No             | Privacy boundary for cross-seller visibility    |
|                 | `AdminOverrideViewSet`      | `GET /api/admin-overrides/`      | `GET /api/admin-overrides/{id}/`      | Emergency admin override on permissions                                   | ‚ùå No                           | ‚úÖ Yes (resource, user\_id)    | ‚ùå No             | Logged to Kafka ‚Üí AuditLog                      |
